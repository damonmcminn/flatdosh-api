{"version":3,"sources":["../es6/api.js"],"names":[],"mappings":";;;;;;;;uBAAoB,SAAS;;;;oBACZ,QAAQ;;;;sBACN,cAAc;;;;mBACjB,OAAO;;;;4BACE,SAAS;;;;wBACb,OAAO;;;;oBACX,QAAQ;;;;oBAEN,aAAa;;;;oBAGf,mBAAmB;;;;uBAChB,sBAAsB;;;;uBACtB,sBAAsB;;;;AAE1C,IAAM,GAAG,GAAG,sBAAS,CAAC;;qBAEP,GAAG;;AAElB,GAAG,CAAC,UAAU,GAAG,YAAW;;AAE1B,SAAO,IAAI,OAAO,CAAC,UAAS,OAAO,EAAE,MAAM,EAAE;;AAE3C,OAAG,CAAC,MAAM,CAAC,oBAAO,IAAI,EAAE,UAAS,GAAG,EAAE;AACpC,UAAI,CAAC,GAAG,EAAE;AACR,yBAAI,IAAI,mBAAiB,oBAAO,IAAI,CAAG,CAAC;AACxC,eAAO,CAAC,OAAO,EAAE,CAAC;OACnB,MAAM;AACL,eAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;OACrB;KACF,CAAC,CAAC;GAEJ,CAAC,CAAC;CACJ,CAAA;;AAED,GAAG,CAAC,GAAG,mBAAM,CAAC;AACd,GAAG,CAAC,GAAG,CAAC,MA5BA,IAAI,EA4BE,CAAC,CAAC;;AAGhB,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,kBAAK,QAAQ,CAAC,CAAC;AACpC,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,kBAAK,QAAQ,CAAC,CAAC;;AAEjC,GAAG,CAAC,GAAG,CAAC,kBAAK,KAAK,CAAC,CAAC;;AAEpB,GAAG,CAAC,GAAG,CAAC,UAAU,uBAAU,CAAC;AAC7B,GAAG,CAAC,GAAG,CAAC,UAAU,uBAAU,CAAC;;AAE7B,GAAG,CAAC,GAAG,uBAAU,CAAC;AAClB,GAAG,CAAC,GAAG,CAAC,GAAG,4BAAe,CAAC","file":"es6/api.js","sourcesContent":["import express from 'express';\nimport auth from './auth';\nimport CONFIG from 'parse-config';\nimport log from './log';\nimport errorHandler from './error';\nimport route404 from './404';\nimport CORS from './cors';\n\nimport {json} from 'body-parser';\n\n// controllers\nimport User from './user/controller';\nimport Expense from './expense/controller';\nimport Balance from './balance/controller';\n\nconst api = express();\n\nexport default api;\n\napi.initialise = function() {\n\n  return new Promise(function(resolve, reject) {\n\n    api.listen(CONFIG.port, function(err) {\n      if (!err) {\n        log.info(`Listening on ${CONFIG.port}`);\n        Promise.resolve();\n      } else {\n        Promise.reject(err);\n      }\n    });\n\n  });\n}\n\napi.use(CORS);\napi.use(json());\n\n\napi.use('/register', User.register);\napi.use('/login', auth.password);\n\napi.use(auth.token);\n\napi.use('/expense', Expense);\napi.use('/balance', Balance);\n\napi.use(route404);\napi.use('*', errorHandler);\n"]}