{"version":3,"sources":["../../es6/group/model.js"],"names":[],"mappings":";;;;;;;;kBAAe,OAAO;;;;AAEtB,IAAM,CAAC,GAAG,gBAAG,CAAC,CAAC;AACf,IAAM,IAAI,GAAG,gBAAG,IAAI,CAAC;;AAErB,IAAM,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;;qBAElB,EAAC,OAAO,EAAP,OAAO,EAAE,UAAU,EAAV,UAAU,EAAC;;AAEpC,SAAS,OAAO,CAAC,KAAK,EAAE;;;;;;;AAOtB,SAAO,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,CACrB,QAAQ,CAAC,SAAS,CAAC,CACnB,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,UAAC,MAAM,EAAE,IAAI;WAAK,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;GAAA,CAAC,CACpE,GAAG,CAAC,UAAA,CAAC,EAAI;AACR,WAAO;AACL,WAAK,EAAE,CAAC,CAAC,MAAM,CAAC;AAChB,UAAI,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,WAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;KAC5C,CAAA;GACF,CAAC,CAAA;CACL;;AAED,SAAS,UAAU,CAAC,KAAK,EAAE;AACzB,SAAO,OAAO,CAAC,KAAK,CAAC,CAClB,GAAG,CAAC,IAAI,CAAC,CACT,IAAI,CAAC,gBAAG,OAAO,CAAC,CAAC;CACrB","file":"es6/group/model.js","sourcesContent":["import db from '../db';\n\nconst r = db.r;\nconst conn = db.conn;\n\nconst groups = r.table('groups');\n\nexport default {members, getMembers}\n\nfunction members(group) {\n\n  // validation that user requesting group info\n  // belongs to group\n  // must come from elsewhere\n  // like balance/controller\n\n  return groups.get(group)\n    .getField('members')\n    .outerJoin(r.table('users'), (member, user) => member.eq(user('id')))\n    .map(u => {\n      return {\n        email: u('left'),\n        name: u('right')('name').default(u('left'))\n      }\n    })\n}\n\nfunction getMembers(group) {\n  return members(group)\n    .run(conn)\n    .then(db.toArray);\n}\n"]}