{"version":3,"sources":["../../es6/group/controller.js"],"names":[],"mappings":";;;;;;;;qBAAkB,SAAS;;;;sBACN,SAAS;;4BACF,OAAO;;AAEnC,IAAM,MAAM,GAAG,QAHP,MAAM,EAGS,CAAC;qBACT,MAAM;;AAErB,MAAM,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;;AAE/B,SAAS,OAAO,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;MAE1B,MAAM,GAAI,GAAG,CAAC,IAAI,CAAlB,MAAM;MACN,KAAK,GAAI,GAAG,CAAC,MAAM,CAAnB,KAAK;;AAEV,MAAI,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,UAAA,CAAC;WAAI,CAAC,CAAC,EAAE,KAAK,KAAK;GAAA,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;;AAE/D,MAAI,CAAC,UAAU,EAAE;AACf,WAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAC,OAAO,EAAE,kBAAkB,EAAC,CAAC,CAAC;GAC5D;;AAED,SAAO,mBAAM,UAAU,CAAC,KAAK,CAAC,CAC3B,IAAI,CAAC,UAAA,OAAO;WAAI,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC;GAAA,CAAC,CAAC;CAEvC","file":"es6/group/controller.js","sourcesContent":["import Group from './model';\nimport {Router} from 'express';\nimport {toArray, conn} from '../db';\n\nconst router = Router();\nexport default router;\n\nrouter.get('/:group', members);\n\nfunction members(req, res, next) {\n\n  let {groups} = req.user;\n  let {group} = req.params\n\n  let authorized = groups.filter(g => g.id === group).length > 0;\n  \n  if (!authorized) {\n    return res.status(403).json({message: 'Not group member'});\n  }\n\n  return Group.getMembers(group)\n    .then(members => res.json(members));\n\n}\n"]}